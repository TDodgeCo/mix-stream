<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Music Files and Directories</title>
    <link href="/static/css/app.css" rel="stylesheet">
    <script src="/static/js/app.js"></script>
</head>
<body class="bg-gray-100">
    <div class="container p-4 mx-auto">
        <h1 class="text-2xl font-bold text-center text-blue-600">Music Files and Directories</h1>

        {{ if .Directories }}
            {{ range .Directories }}
                <h2 class="mt-8 text-xl font-semibold">{{ .Path }}</h2>
                <ul class="mt-4">
                    {{ range .Files }}
                        <li class="mb-4">
                            <p class="font-medium">{{ .Name }}</p>
                            <audio controls class="mt-2">
                                <source src="/files/{{ .EscapedPath }}" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </li>
                    {{ end }}
                </ul>
            {{ end }}
        {{ else }}
            <p class="mt-4">No directories found. Please add one below.</p>
        {{ end }}

        <h2 class="mt-8 text-xl font-semibold">ngrok Domains</h2>
        {{ if .NgrokDomains }}
            <ul class="mt-4">
                {{ range .NgrokDomains }}
                    <li>{{ . }}</li>
                {{ end }}
            </ul>
        {{ else }}
            <p class="mt-4">No ngrok domains configured. Please add one below.</p>
        {{ end }}

        <h2 class="mt-8 text-xl font-semibold">Update Config</h2>
        <form action="/update" method="POST" class="mt-4">
            <div class="mb-4">
                <label class="block font-medium">Add a new directory</label>
                <input type="text" name="directory" required class="w-full p-2 border rounded">
            </div>
            <div class="mb-4">
                <label class="block font-medium">Add a new ngrok domain</label>
                <input type="text" name="ngrok" required class="w-full p-2 border rounded">
            </div>
            <input type="submit" value="Update" class="px-4 py-2 text-white bg-blue-600 rounded">
        </form>
    </div>
    <script src="/static/js/main.js"></script>
</body>
</html>
